[<к содержанию](./readme.md)

# Операции отмены

Отмена может потребоваться, если вы сделали коммит слишком рано, например, забыв добавить какие-то файлы или комментарий к коммиту. Если вы хотите переделать коммит — внесите необходимые изменения, добавьте их в индекс и сделайте коммит ещё раз, указав параметр `--amend`:

`$ git commit --amend`

Эта команда использует область подготовки (индекс) для внесения правок в коммит. Если вы ничего не меняли с момента последнего коммита (например, команда запущена сразу после предыдущего коммита), то снимок состояния останется в точности таким же, а всё что вы сможете изменить — это ваше сообщение к коммиту.

Запустится тот же редактор, только он уже будет содержать сообщение предыдущего коммита. Вы можете редактировать сообщение как обычно, однако, оно заменит сообщение предыдущего коммита.

### **!!! Важно**
При внесении правки в последний коммит, вы не столько исправляете его, сколько заменяете новым, который полностью его перезаписывает. В результате всё выглядит так, будто первоначальный коммит никогда не существовал, а так же он больше не появится в истории вашего репозитория.


## Отмена индексации файла
---

Команда, которой вы определяете состояние этих областей, также подсказывает вам как отменять изменения в них. Например, вы изменили два файла и хотите добавить их в разные коммиты, но случайно выполнили команду `git add *` и добавили в индекс оба. Как исключить из индекса один из них? Команда `git status` напомнит вам: 
```
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)
```
Используйте `git reset HEAD <file>…​` для исключения из индекса.

Более подробно в разделе [git reset](git_reset.md).

## Отмена изменений в файле
---
Что делать, если вы поняли, что не хотите сохранять свои изменения файла?
`git status` подсказывает и это тоже.

```
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)
  ```

### **!!! Важно**
`git checkout -- <file>` — опасная команда. Все локальные изменения в файле пропадут — GIT просто заменит его версией из последнего коммита. Ни в коем случае не используйте эту команду, если вы не уверены, что изменения в файле вам не нужны.

## Отмена действий с помощью git restore
---
Альтернативой `git reset` является  `git restore`.

`git restore <file> …​` -  для отмены индексации файла. 

### **!!! Важно**
`git restore <file> …​` — опасная команда. Все локальные изменения в файле пропадут — GIT просто заменит его версией из последнего коммита.


[![Prev](/assets/prev3.png)](commit.md "Предыдущий раздел")[![Next](/assets/next3.png)](git_add.md "Следующий раздел")